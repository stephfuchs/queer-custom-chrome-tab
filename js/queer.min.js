class Translator{getLocale(){switch(chrome.i18n.getUILanguage()){case"de":case"de-DE":case"de-AT":case"de-CH":return"de";case"en":default:return"en"}}translateIndex(){document.getElementById("page-index-title").innerText=this._getMessage("pageIndexTitle"),document.getElementById("page-index-footer-url").append(this._getMessage("pageIndexFooterUrl")),document.getElementById("page-queer-title").innerText=this._getMessage("pageQueerTitle"),document.getElementById("page-queer-sub-title").innerText=this._getMessage("pageQueerSubTitle")}translateSource(){document.getElementById("queer-flag-information-sources").innerText=this._getMessage("queerFlagInformationSources")}_getMessage(e,t=[]){return chrome.i18n.getMessage(e,t)}}class Queerness{constructor(e){this.startYear=2021,this.date=new Date,this.currentYear=this.date.getFullYear(),this.contributor="Stephanie Fuchs",this.translator=e,this.language=this.translator.getLocale(),document.getElementsByTagName("html")[0].setAttribute("lang",this.language)}init(){this._setFooter(),this._translatePage(),this._processJson()}_processJson(){let e=new XMLHttpRequest;var t=this;e.open("GET","../json/queerInformation.json"),e.onload=function(){if(e.status>=200&&e.status<400){let r=JSON.parse(e.responseText),n=r.queerInformationPicker,a=t._random(n.length);t._setQueerInformation(r[n[a]][t.language])}},e.send()}_setQueerInformation(e){this._setInnerText("queer-flag-title",e.queer_flag_title),this._setInnerText("queer-flag-information",e.queer_flag_information),document.getElementById("queer-flag-image").setAttribute("src",e.queer_flag_image.queer_flag_image_src),document.getElementById("queer-flag-image").setAttribute("alt",e.queer_flag_image.queer_flag_image_alt),this._setInformationSources(e.queer_flag_information_copyright_list)}_setInformationSources(e){let t="";if(null!==e){let r;for(r=0;r<e.length;r++)t+="<li>"+e[r]+"</li>";this.translator.translateSource(),this._setInnerHtml("queer-flag-information-copyright-list",t)}else document.getElementById("queer-flag-information-copyright-list").remove()}_setFooter(){let e=" ";this.currentYear!==this.startYear&&(e=" - "+this.currentYear+" "),this._setInnerHtml("page-index-footer-copyright-year","&copy; "+this.startYear+e+this.contributor)}_setInnerHtml(e,t){document.getElementById(e).innerHTML=t}_setInnerText(e,t){document.getElementById(e).innerText=t}_random(e){return Math.floor(Math.random()*e)}_translatePage(){this.translator.translateIndex()}}var queer=new Queerness(new Translator);queer.init();
